<div class="users-management-container">
  <!-- Header Section -->
  <div class="users-header">
    <div class="header-content">
      <h2><i class="bi bi-people-fill"></i> User Management</h2>
      <p class="text-muted">Manage system users, roles, and permissions</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" id="addUserBtn">
        <i class="bi bi-person-plus"></i> Add New User
      </button>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-cards" id="userStats">
    <div class="stat-card">
      <div class="stat-icon">
        <i class="bi bi-people"></i>
      </div>
      <div class="stat-content">
        <h3 id="totalUsers">-</h3>
        <p>Total Users</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon admin">
        <i class="bi bi-shield-check"></i>
      </div>
      <div class="stat-content">
        <h3 id="adminUsers">-</h3>
        <p>Administrators</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon user">
        <i class="bi bi-person"></i>
      </div>
      <div class="stat-content">
        <h3 id="regularUsers">-</h3>
        <p>Regular Users</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon active">
        <i class="bi bi-check-circle"></i>
      </div>
      <div class="stat-content">
        <h3 id="activeUsers">-</h3>
        <p>Active Users</p>
      </div>
    </div>
  </div>

  <!-- Users Table -->
  <div class="users-table-container">
    <div class="table-header">
      <div class="search-box">
        <i class="bi bi-search"></i>
        <input type="text" id="userSearch" placeholder="Search users..." />
      </div>
      <div class="table-actions">
        <button class="btn btn-outline-secondary btn-sm" id="refreshUsers">
          <i class="bi bi-arrow-clockwise"></i> Refresh
        </button>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-hover" id="usersTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Full Name</th>
            <th>Email</th>
            <th>Department</th>
            <th>Role</th>
            <th>Status</th>
            <th>Last Login</th>
            <th>Created Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="usersTableBody">
          <!-- Users will be loaded here -->
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Add/Edit User Modal -->
<div
  class="modal fade"
  id="userModal"
  tabindex="-1"
  aria-labelledby="userModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="userModalLabel">Add New User</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form id="userForm">
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="username" class="form-label">Username *</label>
                <input
                  type="text"
                  class="form-control"
                  id="username"
                  name="username"
                  required
                />
                <div class="invalid-feedback" id="usernameError"></div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="fullName" class="form-label">Full Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="fullName"
                  name="full_name"
                />
                <div class="invalid-feedback" id="fullNameError"></div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                />
                <div class="invalid-feedback" id="emailError"></div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="department" class="form-label">Department</label>
                <input
                  type="text"
                  class="form-control"
                  id="department"
                  name="department"
                />
                <div class="invalid-feedback" id="departmentError"></div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="userRole" class="form-label">Role *</label>
                <select
                  class="form-select"
                  id="userRole"
                  name="user_role"
                  required
                >
                  <option value="">Select Role</option>
                  <option value="User">User</option>
                  <option value="Administrator">Administrator</option>
                </select>
                <div class="invalid-feedback" id="roleError"></div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="phone" class="form-label">Phone</label>
                <input
                  type="tel"
                  class="form-control"
                  id="phone"
                  name="phone"
                />
                <div class="invalid-feedback" id="phoneError"></div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="password" class="form-label">Password *</label>
                <div class="input-group">
                  <input
                    type="password"
                    class="form-control"
                    id="password"
                    name="password"
                    required
                  />
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="togglePassword"
                  >
                    <i class="bi bi-eye"></i>
                  </button>
                </div>
                <div class="invalid-feedback" id="passwordError"></div>
                <div class="form-text">
                  Password must be at least 8 characters long with uppercase,
                  lowercase, number, and special character
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="confirmPassword" class="form-label"
                  >Confirm Password *</label
                >
                <div class="input-group">
                  <input
                    type="password"
                    class="form-control"
                    id="confirmPassword"
                    name="confirmPassword"
                    required
                  />
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="toggleConfirmPassword"
                  >
                    <i class="bi bi-eye"></i>
                  </button>
                </div>
                <div class="invalid-feedback" id="confirmPasswordError"></div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary" id="saveUserBtn">
          Save User
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Change Password Modal -->
<div
  class="modal fade"
  id="changePasswordModal"
  tabindex="-1"
  aria-labelledby="changePasswordModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="changePasswordModalLabel">
          Change Password
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form id="changePasswordForm">
          <div class="mb-3">
            <label for="currentPassword" class="form-label"
              >Current Password *</label
            >
            <input
              type="password"
              class="form-control"
              id="currentPassword"
              required
            />
            <div class="invalid-feedback" id="currentPasswordError"></div>
          </div>
          <div class="mb-3">
            <label for="newPassword" class="form-label">New Password *</label>
            <div class="input-group">
              <input
                type="password"
                class="form-control"
                id="newPassword"
                required
              />
              <button
                class="btn btn-outline-secondary"
                type="button"
                id="toggleNewPassword"
              >
                <i class="bi bi-eye"></i>
              </button>
            </div>
            <div class="invalid-feedback" id="newPasswordError"></div>
            <div class="form-text">
              Password must be at least 8 characters long with uppercase,
              lowercase, number, and special character
            </div>
          </div>
          <div class="mb-3">
            <label for="confirmNewPassword" class="form-label"
              >Confirm New Password *</label
            >
            <div class="input-group">
              <input
                type="password"
                class="form-control"
                id="confirmNewPassword"
                required
              />
              <button
                class="btn btn-outline-secondary"
                type="button"
                id="toggleConfirmNewPassword"
              >
                <i class="bi bi-eye"></i>
              </button>
            </div>
            <div class="invalid-feedback" id="confirmNewPasswordError"></div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary" id="savePasswordBtn">
          Change Password
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div
  class="modal fade"
  id="deleteUserModal"
  tabindex="-1"
  aria-labelledby="deleteUserModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteUserModalLabel">Confirm Delete</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p>
          Are you sure you want to delete the user
          <strong id="deleteUserName"></strong>?
        </p>
        <p class="text-danger">This action cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
          Delete User
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Loading Spinner -->
<div class="loading-overlay" id="loadingOverlay" style="display: none">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
